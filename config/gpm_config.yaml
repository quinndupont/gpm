project_name: "Good Poetry Model"
version: "2.0.0"

hardware:
  total_ram_gb: 24
  reserved_ram_gb: 4
  available_ram_gb: 20
  metal_enabled: true

ollama:
  model: "llama3.2:3b"
  host: "http://localhost:11434"
  temperature: 0.9
  max_tokens: 800
  rate_limit_delay: 0.5

datasets:
  - name: "gutenberg"
    repo: "matthh/gutenberg-poetry-corpus"
    weight: 1.0
  - name: "merve"
    repo: "merve/poetry"
    weight: 1.0
  - name: "public_domain"
    repo: "DanFosing/public-domain-poetry"
    weight: 0.8
  - name: "modern"
    repo: "jassiyu/poetry-modern"
    weight: 1.0

processing:
  min_poem_length: 150
  max_poem_length: 8000
  min_lines: 4
  deduplication: true
  quality_filter: true
  use_offline: true
  use_local_processed: true
  dedup:
    split_method: word_ngram
    ngram_size: 13
    similarity_threshold: 0.8
    num_minhashes: 128

data_preparation:
  reverse_prompt_limit: 1000
  synthetic_count: 2000
  style_topics:
    - nature
    - love
    - mortality
    - urban life

validation:
  min_poem_length: 50
  min_lines: 2
  check_repetition: true
  dedup:
    split_method: word_ngram
    ngram_size: 13
    similarity_threshold: 0.8

training:
  task: poetry_generation
  base_model: "mlx-community/Llama-3.2-3B-Instruct-4bit"
  lora_rank: 16
  lora_alpha: 32
  num_layers: 20
  dropout: 0.0
  batch_size: 1
  iterations: 2000
  learning_rate: 0.00002
  steps_per_eval: 50
  save_every: 100
  max_seq_length: 1024
  gradient_checkpointing: true
  eval_prompts:
    - "Write a sonnet about artificial intelligence"
    - "Compose a haiku about winter solitude"
    - "Write in the style of Emily Dickinson about modern technology"
    - "Create a free verse poem about ocean waves"
